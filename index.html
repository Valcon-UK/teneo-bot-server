<html>
 <head>
  <meta charset="UTF-8">
<script src="teneo-web-chat.js"></script>
<script src="customer-sdk.js"></script>  
<script src="lc-extensions.js"></script>  
<script>

 /*! For license information please see teneo-web-chat.js.LICENSE.txt */
function f1() {
	console.log("f1 button clicked");
      const elem = document.getElementById('twc-launchbutton');
      elem.click();

	//form validation that recalls the page showing with supplied inputs.    
    var element = document.getElementById('teneo-web-chat');	
    const teneoProps = {
        'teneoEngineUrl': 'https://skilledmacaws-83ad8d.bots.teneo.ai/blue_finance_demo_6x8cws2zqb9bq8y6d6pctncddv/',
	'teneoEngineParams': {
        demo:'applyloan', 
        botname:'Anna',
	channel:'applyloan',	
        },
        'title':'Talk to Anna from AVJ Finance about loans',
        'autoRedirect':false,
        'showCloseButton':true,
        'first_use_asr_system_message':'',
        'showAsrButton':true,
        //'ttsActive':true,
	'showTtsButton':true,
	'locale':'en-GB',
        'msVoice':'en-GB-LibbyNeural',
        'msCognitiveSubscriptionKey':'e80f77176d1349709e6d237bbe3d476d',
        'msCognitiveRegion':'uksouth'
	 //,      'botAvatarUrl':'https://avj-images.s3.eu-west-2.amazonaws.com/AVJ_newlogo_icon.png'
      }
      
      window.TeneoWebChat.initialize(element,teneoProps); 

}
function f2() {
      const elem = document.getElementById('twc-launchbutton');
      elem.click();	
    //form validation that recalls the page showing with supplied inputs.    
    var element = document.getElementById('teneo-web-chat');	
    const teneoProps = {
        'teneoEngineUrl': 'https://skilledmacaws-83ad8d.bots.teneo.ai/blue_finance_demo_6x8cws2zqb9bq8y6d6pctncddv/',
	'teneoEngineParams': {
        demo:'reviewdetails', 
        botname:'Amanda',
	channel:'reviewdetails',	
        },
        'title':'Review your details with Amanda from AVJ Finance',
        'autoRedirect':false,
        'showCloseButton':true,
        'first_use_asr_system_message':'',
        'showAsrButton':true,
        //'ttsActive':true,
	'showTtsButton':true,
	'locale':'en-GB',
        'msVoice':'en-GB-LibbyNeural',
        'msCognitiveSubscriptionKey':'e80f77176d1349709e6d237bbe3d476d',
        'msCognitiveRegion':'uksouth'
	 //,      'botAvatarUrl':'https://avj-images.s3.eu-west-2.amazonaws.com/AVJ_newlogo_icon.png'
      }
      
      window.TeneoWebChat.initialize(element,teneoProps); 

}
function hideAndShow() {
      document.getElementById('summary').style.display = 'none';
      document.getElementById('summary2').style.display = 'block';
}
 window.onload = function () {

document.getElementById("applyloan").onclick = f1;

document.getElementById("details").onclick = f2;
document.getElementById("transactions").onclick = hideAndShow;

    watch_for_chat();
    if (
      window.TeneoWebChat &&
        typeof window.TeneoWebChat.initialize === 'function'
    ) {
      var element = document.getElementById('teneo-web-chat');
      const teneoProps = {
        'teneoEngineUrl': 'https://skilledmacaws-83ad8d.bots.teneo.ai/blue_finance_demo_6x8cws2zqb9bq8y6d6pctncddv/',
	'teneoEngineParams': {
        demo:'valcon', 
        botname:'Ava',
	channel:'valcon',	
        },
        'channel':'valcon',
        'title':'Talk to Ava from AVJ Finance',
        'autoRedirect':false,
        'showCloseButton':true,
        'first_use_asr_system_message':'',
        'showAsrButton':true,
        //'ttsActive':true,
	'showTtsButton':true,
	'locale':'en-GB',
        'msVoice':'en-GB-LibbyNeural',
        'msCognitiveSubscriptionKey':'e80f77176d1349709e6d237bbe3d476d',
        'msCognitiveRegion':'uksouth'
	 ,'botAvatarUrl':'https://avj-images.s3.eu-west-2.amazonaws.com/AVJ_newlogo_icon.png'
      }
      window.TeneoWebChat.initialize(element,teneoProps);
      
    }
  }

  function onEngineResponse(payload) {
	// handle engine response event
    var response = payload.responseDetails;

    if(response.output.parameters.msVoice && response.output.parameters.msVoice!="") {
    	TeneoWebChat.call('set_ms_voice', response.output.parameters.msVoice );
    	TeneoWebChat.call('set_locale',response.output.parameters.locale );
        console.log("voice", response.output.parameters.msVoice); 	    
        console.log("locale", response.output.parameters.locale);
    }
    
}

TeneoWebChat.on('engine_response', onEngineResponse);

 
  window.TENEOCTX || (TENEOCTX = {});
  TENEOCTX = {
    init: {
      trustedDomain: "", // something like http://localhost:8080 // "" = receive and post messages to all domains
      allowScripts: true // false = if you want to disable potential eval
    },
    ctx: {
      eventSource: "leopard-embed",
      pageTitle: document.title,
      pageUrl: window.location.href,
      pageTopic: "Help",
      message: "This was sent from the customer's web site"
    }
  };
</script>  
<script>
 

const resize_spec = '* 1.75';
 
function find_node( path, context )
{
     var found = document.evaluate( path, context, null,
                                    XPathResult.ANY_UNORDERED_NODE_TYPE, null );
     return ( found && found.singleNodeValue ) ? found.singleNodeValue : null;
}

function watch_for_chat ()
{
    const sentinel2 = function(mutants, observer)
    {
        for( const mutant of mutants )
        {
            var found = false;
            if (mutant.type != 'childList')
                 continue;

            var added = mutant.addedNodes;
            for (let i = 0; i < added.length; i++)
            {
                if( added[i].id == 'twc-chat-window' )
                    found = added[i];
                else
                    found = find_node( "//*[@id='twc-chat-window']", added[i] );

                if( found )
                {
                    var width;
                    var style = window.getComputedStyle( found );
                    //width = 'calc( ' + style.width + ' ' + resize_spec + ' )';
                    width='60%';
                    found.style['min-height'] = '90%';
                    found.style.width = width;
                    break;
                }
            }
        }    
    };

    const sentinel1 = function(mutants, observer)
    {
        for( const mutant of mutants )
        {
            var found = false;
            if (mutant.type != 'childList')
                 continue;

            var added = mutant.addedNodes;
            for (let i = 0; i < added.length; i++)
            {
                if( added[i].id == 'twc-launchbutton' )
                    found = added[i];
                else
                    found = find_node( "//*[@id='twc-launchbutton']", added[i] );

                if( found )
                {
                    observer.disconnect();
                    //found.click();
                    break;
                }
           }
        }
    };

    const target   = document.getElementsByTagName('body')[0];
    const config   = { attributes: false, childList: true, subtree: true };; 
 
    if( target )
    {
         const open = new MutationObserver( sentinel1 );
         const wide = new MutationObserver( sentinel2 )
         if( open )
             open.observe( target, config );
         if( wide )
             wide.observe( target, config );
    }
}


  </script>
  <style>

  
 .teneo-web-chat {
  --primary-font: "Open Sans", Arial, sans-serif !important;
  font-family: "Open Sans", Arial, sans-serif !important;
  font-size: 28px !important;
  font: Open Sans Regular,Arial,sans-serif  !important;
  --quickreply-fg-color: #89031b !important;
  --quickreply-border-color: #89031b !important;	 
  --quick-reply-bg-color: #89031b !important;
  --primary-color: #89031b !important;
  --header-fg-color: #ffffff !important; 
  --light-bg-color: #89031b !important;
  --launch-button-bg-color: #89031b !important;
  --header-bg-color: #89031b !important;
  --bot-message-fg-color: #000000 !important;
  --card-bg-color: #89031b !important;
  --form-subtitle-text-color: #afc7e0 !important;
  --dark-fg-color: #89031b !important;
  --success-color: #a3818a !important;
  --danger-color: #ee5743 !important;
  --secondary-color: #333333 !important;
  --light-fg-color: #afc7e0 !important;
  --user-message-fg-color: #ffffff !important;
  --user-message-bg-color: #89031b !important;
  --bot-message-bg-color: #afc7e0 !important;  
  --callout-fg-color: #afc7e0 !important;  
  --sendicon-fg-color: #afc7e0 !important;
  --form-input-background-color: #89031b !important;
  --quickreply-expired-color: #89031b !important;
  --card-bg-color: #ffffff !important;
  --text-link-color: #000000 !important;
  --user-typing-indicator-fg-color: #000000 !important;
  --user-typing-indicator-bg-color: #afc7e0 !important;
} 
.twc-user-input.twc-active {
  --user-message-bg-color: #afc7e0 !important;
  --user-message-fg-color: #89031b !important;
  --form-input-background-color: #afc7e0  !important;
}	  
.twc-chat-window {
	font-family: Verdana, sans-serif;
}
	  
.twc-text-message {
  font-size: 28px !important;	
  font-family: Arial, sans-serif;
}
	 
.twc-text-message__text {
  font-size: 28px !important;	
  font-family: Arial, sans-serif;
}
/*	  
.twc-card {
  background-color: #ffffff !important;
  border: 0px !important;
  border-top: 0px !important;
}

.twc-card .twc-buttons, .twc-card .twc-linkbuttons {
  background-color: #ffffff !important;
  border: 0px !important;
  border-top: 0px !important;
}

.twc-card .twc-btn  {
	
  background: var(--user-message-bg-color, #565867);
  color: var(--user-message-fg-color, #565867);
  font-size: 18px !important;	
 
}
.twc-card .twc-buttons .twc-btn:hover  {
  --user-message-fg-color: #003265 !important;
  --user-message-bg-color: #fdd42f !important;	
  color: var(--user-message-bg-color, #565867);
  background: var(--user-message-fg-color, #565867);
  font-size: 18px !important;	
 
}	  
.twc-buttons .twc-btn:hover  {
  --user-message-fg-color: #003265 !important;
  --user-message-bg-color: #fdd42f !important;		
  color: var(--user-message-bg-color, #565867);
  background: var(--user-message-fg-color, #565867);
  font-size: 18px !important;	
 
}	 
	  
.twc-linkbutton {
  background: var(--user-message-bg-color, #565867);
  color: var(--user-message-fg-color, #565867);
  font-size: 18px !important;	
}
	  
.twc-quickreply-message__item {
  --user-message-fg-color: #003265 !important;  
  --user-message-bg-color: #fdd42f !important;
  background: var(--user-message-bg-color, #565867);
  color: var(--user-message-fg-color, #565867);
  font-size: 18px !important;	
}
	  
.twc-quickreply-message.twc-expired .twc-quickreply-message__item.twc-selected { 
  --quickreply-bg-color:  #003265 !important;    
 --quickreply-expired-color:  #003265 !important; 
  background: var(--user-message-bg-color, #565867);
  font-size: 18px !important;	
}
.twc-buttons.twc-expired .twc-btn.twc-selected	 {  
  --quickreply-bg-color:  #003265 !important;    
 --quickreply-expired-color:  #003265 !important; 
  background: var(--user-message-fg-color, #565867);
  font-size: 18px !important;	
}
.twc-buttons.twc-expired .twc-btn:not(.twc-selected) {  
  --quickreply-expired-color: #c9c9c9 !important;
  --user-message-bg-color: #eff0f2 !important;
  font-size: 18px !important;	
}
	  
.twc-quickreply-message.twc-expired .twc-quickreply-message__item:not(.twc-selected) { 
  --quickreply-expired-color: #c9c9c9 !important;
  --user-message-bg-color: #eff0f2 !important;
  font-size: 18px !important;	
}
	*/  
.twc-header__title {
  font-weight: bold !important;
  font-size: 36px !important;	
  font-family: Arial, sans-serif;
}	  
	  
// button drop shadow
.twc-launch-button:hover {
  box-shadow: 0 0px 27px 1.5px rgba(0, 0, 0, 0.2);
}

// increase size of the icon slightly
.twc-launch-button:hover .twc-launch-button__open-icon {
  transform: scale(1.5);
}   
tr, td{
	padding-left: 25px;
   font-family: Arial, sans-serif;
}

tr, td .menubar{
  background-color: transparent;
  height: 80px;
  color: #ffffff;
   font-weight: bold;
   
   
  font-size: 24px !important;
}
tr, td .accounts{
 
}
body {
background-image: url(https://avj-images.s3.eu-west-2.amazonaws.com/avjfinancebackground2.jpg)
}
	  
.accounts {
padding-right: 0px;
  padding-top: 70px;
}
</style>
 </head>
    <body>
<!-- Teneo Web Chat end -->
<div id="main">


<div id="buttons" style=align:right;">
<input type="image" id="transactions" class="transactions" src="https://avj-images.s3.eu-west-2.amazonaws.com/button_my-recent-transactions.png" />
<input type="image" id="details" class="details" src="https://avj-images.s3.eu-west-2.amazonaws.com/button_review-personal-details.png"  />
<input type="image" id="applyloan" class="applyloan"  src="https://avj-images.s3.eu-west-2.amazonaws.com/button_apply-for-a-loan.png"  />
</div>
   
<!--img crossOrigin="anonymous" src="https://avj-images.s3.eu-west-2.amazonaws.com/avjfinance.jpg"/--> 
<table class="menubar" style="border:0px solid black;margin-left:90px;margin-right:auto;width:45%;padding-top: 230px;">
<tr>
<td> </td>
</tr>
</table>
</div>

<div id="summary">
<table class="accounts" style="border:0px solid black;margin-left:90px;margin-right:auto;width:45%">
<tr style="background-color: transparent;height: 80px;color: #ffffff;font-weight: bold;font-size: 32px !important;margin-left:0px;"><td colspan="2">My accounts</td></tr>
<tr style="background-color: rgba(255,255,255,.9);height: 80px;color: #89031b;font-weight: bold;font-size: 23px !important;">
<td>Account Type</td><td>Balance Outstanding</td></tr>
<tr style="background-color: rgba(255,255,255,.9);height: 80px;color: #89031b;font-weight: bold;font-size: 19px !important;">
<td>VISA Credit card</td><td>-£2,675.82</td>
</tr>
<tr style="background-color: rgba(255,255,255,.9);height: 80px;color: #89031b;font-weight: bold;font-size: 19px !important;">
<td>Vehicle Finance</td><td>-£7,459.56</td>
</tr>
</table>
</div>
<div id="summary2" style="display:none">
<table class="accounts" style="border:0px solid black;margin-left:90px;margin-right:auto;width:45%">
<tr style="background-color: transparent;height: 80px;color: #ffffff;font-weight: bold;font-size: 32px !important;margin-left:0px;"><td colspan="3">My recent transactions</td></tr>
<tr style="background-color: rgba(255,255,255,.9);height: 80px;color: #89031b;font-weight: bold;font-size: 23px !important;">
<td>Details</td><td>Transaction</td><td>Balance</td></tr>
<tr style="background-color: rgba(180,180,180,.9);color: #89031b;font-weight: bold;font-size: 18px !important;height:50px;">
<td colspan="3">24th October</td></tr>
<tr style="background-color: rgba(255,255,255,.9);color: #89031b;font-size: 16px !important;height:50px;">
<td>Holiday Inn Reading</td><td style="text-align:right">-£267.82</td><td>-£1,573.89</td>
</tr>
<tr style="background-color: rgba(255,255,255,.9);color: #89031b;font-size: 16px !important;height:50px;">
<td>Amazon Music</td><td style="text-align:right">-£9.99</td>td><td>-£1,306.07</td>
</tr>
<tr style="background-color: rgba(180,180,180,.9);color: #89031b;font-weight: bold;font-size: 18px !important;height:50px;">
<td colspan="3">20th October</td></tr>
<tr style="background-color: rgba(255,255,255,.9);color: #89031b;font-size: 16px !important;height:50px;">
<td>Tesco Bar Hill</td><td style="text-align:right">-£35.49</td>td><td>-£1,270.58</td>
</tr>
<tr style="background-color: rgba(255,255,255,.9);color: #89031b;font-size: 16px !important;height:50px;">
<td>Netflix</td><td style="text-align:right">-£15.99</td>td><td>-£1,254.59</td>
</tr>
<tr style="background-color: rgba(180,180,180,.9);color: #89031b;font-weight: bold;font-size: 18px !important;height:50px;">
<td colspan="3">19th October</td></tr>
<tr style="background-color: rgba(255,255,255,.9);color: #89031b;font-size: 16px !important;height:50px;">
<td>Hotel Z Holburn</td><td style="text-align:right">-£159.99</td><td>-£1,094.60</td>
</tr>	
</table>
</div>	    
<!-- Teneo Web Chat start -->



<div id="teneo-web-chat"></div>
    </body>
</html>
